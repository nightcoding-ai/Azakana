{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Simon Kinet\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Simon Kinet\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Simon Kinet\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Simon Kinet\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./Register.css\";import{Link}from'react-router-dom';import Cookies from'js-cookie';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={credentials:{username:'',password:''},token:Cookies.get('Token')};_this.login=function(event){fetch('http://127.0.0.1:8000/api/rest-auth/login/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_this.state.credentials)}).then(function(data){return data.json();}).then(function(data){var tok=\"key\";var pseudo=_this.state.credentials.username.toString();if(data[tok]){Cookies.set(\"Token\",data.key,{expires:1});Cookies.set(\"Pseudo\",pseudo,{expires:1});document.location.href=\"/connected\";}else{var error=document.getElementById('error');error.innerHTML=\"<h3 id='incorrect'>Pseudo/mot de passe incorrect</h3>\";}}).catch(function(error){return console.error(error);});};_this.inputChanged=function(event){var cred=_this.state.credentials;cred[event.target.name]=event.target.value;_this.setState({credentials:cred});};_this.connect=function(){if(typeof _this.state.token!='undefined'){document.location.href=\"/\";}};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"login\",className:\"login\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label-form\"},\"Nom d'utilisateur\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",className:\"input-form\",value:this.state.credentials.username,onChange:this.inputChanged})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{className:\"label-form\"},\"Mot de passe\",/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"input-form\",id:\"mdp\",value:this.state.credentials.password,onChange:this.inputChanged})),/*#__PURE__*/React.createElement(\"label\",{id:\"error\"}),/*#__PURE__*/React.createElement(\"button\",{id:\"button-form\",className:\"button-form\",onClick:this.login},\"Connexion\"),/*#__PURE__*/React.createElement(Link,{to:\"/sign-up\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button-register\",to:\"/sign-up\"},\"Inscription\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["C:/Users/Simon Kinet/Documents/GitHub/Azakana/frontend/src/components/Register/Login.js"],"names":["React","Component","Link","Cookies","Login","state","credentials","username","password","token","get","login","event","fetch","method","headers","body","JSON","stringify","then","data","json","tok","pseudo","toString","set","key","expires","document","location","href","error","getElementById","innerHTML","catch","console","inputChanged","cred","target","name","value","setState","connect"],"mappings":"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","sourcesContent":["import React, { Component} from \"react\";\r\nimport \"./Register.css\";\r\nimport { Link } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    credentials: {username: '', password: ''},\r\n    token: Cookies.get('Token'),\r\n  }\r\n\r\n  login = event => {\r\n    fetch('http://127.0.0.1:8000/api/rest-auth/login/', {\r\n      method: 'POST',\r\n      headers: {'Content-Type': 'application/json'},\r\n      body: JSON.stringify(this.state.credentials)\r\n    })\r\n    .then( data => data.json())\r\n    .then(\r\n      data => {\r\n        let tok =\"key\";\r\n        let pseudo = (this.state.credentials.username).toString();\r\n        if(data[tok]){\r\n            Cookies.set(\"Token\",data.key, { expires: 1 });\r\n            Cookies.set(\"Pseudo\",pseudo, { expires: 1 });\r\n            document.location.href=\"/connected\";\r\n        }\r\n        else{\r\n           let error = document.getElementById('error');\r\n           error.innerHTML=\"<h3 id='incorrect'>Pseudo/mot de passe incorrect</h3>\";\r\n        }\r\n      }\r\n    )\r\n    .catch( error => console.error(error))\r\n  }\r\n  inputChanged = event => {\r\n    const cred = this.state.credentials;\r\n    cred[event.target.name] = event.target.value;\r\n    this.setState({credentials: cred});\r\n  }\r\n  connect = () => {\r\n    if (typeof(this.state.token) != 'undefined') {\r\n      document.location.href=\"/\";\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n           <div id=\"login\" className=\"login\">\r\n              <label className=\"label-form\">\r\n                  Nom d'utilisateur\r\n                  <input type=\"text\" name=\"username\" className=\"input-form\"\r\n                   value={this.state.credentials.username}\r\n                   onChange={this.inputChanged} />\r\n                </label>\r\n                <br/>\r\n                <label className=\"label-form\">\r\n                  Mot de passe\r\n                  <input type=\"password\" name=\"password\" className=\"input-form\" id=\"mdp\"\r\n                   value={this.state.credentials.password}\r\n                   onChange={this.inputChanged} />\r\n                </label>\r\n                <label id='error'></label>\r\n                <button id='button-form' className=\"button-form\" onClick={this.login} >Connexion</button>\r\n                <Link to='/sign-up'>\r\n                    <button className=\"button-register\"  to='/sign-up'>Inscription</button>\r\n                </Link>\r\n          </div>\r\n    );\r\n  }\r\n}\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}