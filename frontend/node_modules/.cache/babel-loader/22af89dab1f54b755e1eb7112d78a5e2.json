{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import\"../Register/Register.css\";import\"./Add_team.css\";import React,{Component}from'react';import{Link}from'react-router-dom';import Footer from\"../Footer/Footer\";import axios from'axios';import Cookies from'js-cookie';var csrf_token=\"\";var Add_team=/*#__PURE__*/function(_Component){_inherits(Add_team,_Component);var _super=_createSuper(Add_team);function Add_team(){_classCallCheck(this,Add_team);return _super.apply(this,arguments);}_createClass(Add_team,[{key:\"componentDidMount\",value:function componentDidMount(){axios.get(\"http://127.0.0.1:8000/api/csrf_token/\").then(function(res){csrf_token=res.data;});}},{key:\"get_user_id\",value:function get_user_id(username){var id;axios.get(\"http://127.0.0.1:8000/api/users/\"+username).then(function(res){var data=res.data;id=data.id;});return id;}},{key:\"createTeam\",value:function createTeam(){var data=new FormData();var pseudo=Cookies.get('Pseudo');var user_id=get_user_id(pseudo);console.log(user_id);data.append(\"name\",document.getElementById('team_name').value);data.append(\"csrfmiddlewaretoken\",csrf_token);axios.post(\"http://127.0.0.1:8000/api/create_team/\"+user_id,data).then(function(res){return console.log('text sent');}).catch(function(errors){return console.log(errors);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"team\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"label\",{className:\"label-form\"},\"Nom de l'\\xE9quipe\",/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"team_name\",className:\"input-form\",id:\"team_name\"})),/*#__PURE__*/React.createElement(\"span\",{id:\"error\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-team\",onClick:this.createTeam},\"Cr\\xE9er une \\xE9quipe\")),/*#__PURE__*/React.createElement(Link,{to:\"Join_team\",className:\"btn-toggle\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn-team\",to:\"/Join_team\"},\"Rejoindre une \\xE9quipe existante\"))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Add_team;}(Component);export{Add_team as default};","map":{"version":3,"sources":["C:/Users/Christopher/Desktop/Projets/Azakana/frontend/src/components/Team/Add_team.js"],"names":["React","Component","Link","Footer","axios","Cookies","csrf_token","Add_team","get","then","res","data","username","id","FormData","pseudo","user_id","get_user_id","console","log","append","document","getElementById","value","post","catch","errors","createTeam"],"mappings":"4sBAAA,MAAO,0BAAP,CACA,MAAO,gBAAP,CACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,C,GACqBC,CAAAA,Q,kPAEjB,4BAAoB,CAChBH,KAAK,CAACI,GAAN,CAAU,uCAAV,EACCC,IADD,CACM,SAAAC,GAAG,CAAG,CACRJ,UAAU,CAAGI,GAAG,CAACC,IAAjB,CACH,CAHD,EAIH,C,2BAED,qBAAYC,QAAZ,CAAsB,CAClB,GAAIC,CAAAA,EAAJ,CACAT,KAAK,CAACI,GAAN,CAAU,mCAAmCI,QAA7C,EACCH,IADD,CACM,SAAAC,GAAG,CAAI,CACT,GAAIC,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAf,CACAE,EAAE,CAAGF,IAAI,CAACE,EAAV,CACH,CAJD,EAKA,MAAOA,CAAAA,EAAP,CACH,C,0BAED,qBAAa,CACT,GAAIF,CAAAA,IAAI,CAAG,GAAIG,CAAAA,QAAJ,EAAX,CACA,GAAIC,CAAAA,MAAM,CAAGV,OAAO,CAACG,GAAR,CAAY,QAAZ,CAAb,CACA,GAAIQ,CAAAA,OAAO,CAAGC,WAAW,CAACF,MAAD,CAAzB,CACAG,OAAO,CAACC,GAAR,CAAYH,OAAZ,EACAL,IAAI,CAACS,MAAL,CAAY,MAAZ,CAAoBC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAAzD,EACAZ,IAAI,CAACS,MAAL,CAAY,qBAAZ,CAAmCd,UAAnC,EACAF,KAAK,CAACoB,IAAN,CAAW,yCAAyCR,OAApD,CAA6DL,IAA7D,EACCF,IADD,CACM,SAAAC,GAAG,QAAIQ,CAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAJ,EADT,EAECM,KAFD,CAEO,SAAAC,MAAM,QAAIR,CAAAA,OAAO,CAACC,GAAR,CAAYO,MAAZ,CAAJ,EAFb,EAGH,C,sBACD,iBAAS,CACL,mBACI,qDACI,2BAAK,SAAS,CAAC,MAAf,eACI,2BAAK,SAAS,CAAC,OAAf,eACI,6BAAO,SAAS,CAAC,YAAjB,oCAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,WAAxB,CAAoC,SAAS,CAAC,YAA9C,CAA2D,EAAE,CAAC,WAA9D,EAFJ,CADJ,cAKI,4BAAM,EAAE,CAAC,OAAT,EALJ,cAMI,8BAAQ,SAAS,CAAC,UAAlB,CAA6B,OAAO,CAAE,KAAKC,UAA3C,2BANJ,CADJ,cASI,oBAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,YAA/B,eACI,8BAAQ,SAAS,CAAC,UAAlB,CAA6B,EAAE,CAAC,YAAhC,sCADJ,CATJ,CADJ,cAcI,oBAAC,MAAD,MAdJ,CADJ,CAkBH,C,sBAjDiC1B,S,SAAjBM,Q","sourcesContent":["import \"../Register/Register.css\";\r\nimport \"./Add_team.css\";\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Footer from \"../Footer/Footer\";\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nlet csrf_token = \"\";\r\nexport default class Add_team extends Component {\r\n\r\n    componentDidMount() {\r\n        axios.get(\"http://127.0.0.1:8000/api/csrf_token/\")\r\n        .then(res =>{\r\n            csrf_token = res.data;\r\n        })\r\n    }\r\n\r\n    get_user_id(username) {\r\n        let id;\r\n        axios.get(\"http://127.0.0.1:8000/api/users/\"+username)\r\n        .then(res => {\r\n            let data = res.data;\r\n            id = data.id;\r\n        })\r\n        return id;\r\n    }\r\n\r\n    createTeam() {\r\n        let data = new FormData();\r\n        let pseudo = Cookies.get('Pseudo');\r\n        let user_id = get_user_id(pseudo);\r\n        console.log(user_id);\r\n        data.append(\"name\", document.getElementById('team_name').value);\r\n        data.append(\"csrfmiddlewaretoken\", csrf_token);\r\n        axios.post(\"http://127.0.0.1:8000/api/create_team/\"+user_id, data)\r\n        .then(res => console.log('text sent'))\r\n        .catch(errors => console.log(errors))\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className='team'>\r\n                    <div className='login'>\r\n                        <label className='label-form'>\r\n                            Nom de l'équipe\r\n                            <input type=\"text\" name=\"team_name\" className=\"input-form\" id='team_name'></input>\r\n                        </label>\r\n                        <span id='error'></span>\r\n                        <button className='btn-team' onClick={this.createTeam}>Créer une équipe</button>\r\n                    </div>\r\n                    <Link to='Join_team' className='btn-toggle'>\r\n                        <button className='btn-team' to='/Join_team'>Rejoindre une équipe existante</button>\r\n                    </Link>\r\n                </div>\r\n                <Footer/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}