{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport canUseDom from './canUseDom';\nvar MARK_KEY = \"rc-util-key\";\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nexport function injectCSS(css) {\n  var _option$csp;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!canUseDom()) {\n    return null;\n  }\n\n  var styleNode = document.createElement('style');\n  styleNode.nonce = (_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce;\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (option.prepend && firstChild) {\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\nvar containerCache = new Map();\nexport function updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentElement = placeholderStyle.parentElement;\n    containerCache.set(container, parentElement);\n    parentElement.removeChild(placeholderStyle);\n  }\n\n  var existNode = _toConsumableArray(containerCache.get(container).children).find(function (node) {\n    return node.tagName === 'STYLE' && node[MARK_KEY] === key;\n  });\n\n  if (existNode) {\n    var _option$csp2;\n\n    if (existNode.innerHTML !== css || existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n\n      existNode.innerHTML = css;\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode[MARK_KEY] = key;\n  return newNode;\n}","map":{"version":3,"sources":["C:/Users/Christopher/Desktop/Projets/Azakana/node_modules/rc-util/es/Dom/dynamicCSS.js"],"names":["_toConsumableArray","canUseDom","MARK_KEY","getContainer","option","attachTo","head","document","querySelector","body","injectCSS","css","_option$csp","arguments","length","undefined","styleNode","createElement","nonce","csp","innerHTML","container","firstChild","prepend","insertBefore","appendChild","containerCache","Map","updateCSS","key","has","placeholderStyle","parentElement","set","removeChild","existNode","get","children","find","node","tagName","_option$csp2","_option$csp3","newNode"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport canUseDom from './canUseDom';\nvar MARK_KEY = \"rc-util-key\";\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nexport function injectCSS(css) {\n  var _option$csp;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!canUseDom()) {\n    return null;\n  }\n\n  var styleNode = document.createElement('style');\n  styleNode.nonce = (_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce;\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (option.prepend && firstChild) {\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\nvar containerCache = new Map();\nexport function updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentElement = placeholderStyle.parentElement;\n    containerCache.set(container, parentElement);\n    parentElement.removeChild(placeholderStyle);\n  }\n\n  var existNode = _toConsumableArray(containerCache.get(container).children).find(function (node) {\n    return node.tagName === 'STYLE' && node[MARK_KEY] === key;\n  });\n\n  if (existNode) {\n    var _option$csp2;\n\n    if (existNode.innerHTML !== css || existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n\n      existNode.innerHTML = css;\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode[MARK_KEY] = key;\n  return newNode;\n}"]},"metadata":{},"sourceType":"module"}