{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _createForOfIteratorHelper from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\simon\\\\Documents\\\\GitHub\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import\"./Add_team.css\";import React,{Component}from'react';import{Link}from'react-router-dom';import Footer from\"../Footer/Footer\";import axios from\"axios\";import Cookies from'js-cookie';var teams_name=[];var pseudo=Cookies.get('Pseudo');var BASE_URL='http://127.0.0.1:8000/api/';//51.210.4.115:8000\nvar api_user=BASE_URL+'users/';var user_id=0;var csrf_token=\"\";var Join_team=/*#__PURE__*/function(_Component){_inherits(Join_team,_Component);var _super=_createSuper(Join_team);function Join_team(){_classCallCheck(this,Join_team);return _super.apply(this,arguments);}_createClass(Join_team,[{key:\"componentDidMount\",value:function componentDidMount(){axios.get(\"http://127.0.0.1:8000/api/csrf_token/\").then(function(res){csrf_token=res.data;});axios.get(\"http://127.0.0.1:8000/api/teams/\").then(function(response){var data=response.data;for(var i=0;i<data.length;i++){teams_name.push(data[i].name);}});axios.get(\"http://127.0.0.1:8000/api/users/\"+pseudo).then(function(res){var data=res.data;user_id=data.id;});}},{key:\"joinTeam\",value:function joinTeam(){var _this=this;var pseudonym=pseudo;axios.get(api_user+pseudonym).then(function(res){var get_id=res.data;var user_id=get_id.id;var data=new FormData();data.append(\"user\",user_id);data.append(\"team\",_this.value);data.append(\"csrfmiddlewaretoken\",csrf_token);axios.post(\"http://127.0.0.1:8000/api/add_player/\",data).then(function(response){if(response.data){console.log(\"Equipe rejointe\");}}).catch(function(errors){return console.log(errors);});});}},{key:\"render\",value:function render(){var teams=teams_name;var items=[];var _iterator=_createForOfIteratorHelper(teams.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),index=_step$value[0],value=_step$value[1];items.push(/*#__PURE__*/React.createElement(\"li\",{key:index,id:\"listeElement\"},value,/*#__PURE__*/React.createElement(\"button\",{id:\"buttonJoin\",onClick:this.joinTeam(this)},\"Rejoindre\")));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"team\"},/*#__PURE__*/React.createElement(\"div\",{className:\"contentTeams\"},\"Les \\xE9quipes\",/*#__PURE__*/React.createElement(\"ul\",{id:\"listEquipes\"},items))),/*#__PURE__*/React.createElement(Footer,null));}}]);return Join_team;}(Component);export{Join_team as default};","map":{"version":3,"sources":["C:/Users/simon/Documents/GitHub/Azakana/frontend/src/components/Team/Join_team.js"],"names":["React","Component","Link","Footer","axios","Cookies","teams_name","pseudo","get","BASE_URL","api_user","user_id","csrf_token","Join_team","then","res","data","response","i","length","push","name","id","pseudonym","get_id","FormData","append","value","post","console","log","catch","errors","teams","items","entries","index","joinTeam"],"mappings":"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","sourcesContent":["import \"./Add_team.css\";\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Footer from \"../Footer/Footer\";\r\nimport axios from \"axios\";\r\nimport Cookies from 'js-cookie';\r\nimport { checkPropTypes } from \"prop-types\";\r\n\r\nlet teams_name = [];\r\nlet pseudo = Cookies.get('Pseudo');\r\nconst BASE_URL = 'http://127.0.0.1:8000/api/';//51.210.4.115:8000\r\nconst api_user = BASE_URL+'users/';\r\nlet user_id = 0;\r\nlet csrf_token = \"\";\r\n\r\nexport default class Join_team extends Component {\r\n\r\n    componentDidMount() {\r\n        axios.get(\"http://127.0.0.1:8000/api/csrf_token/\")\r\n        .then(res =>{\r\n            csrf_token = res.data;\r\n        })\r\n        axios.get(\"http://127.0.0.1:8000/api/teams/\")\r\n        .then(response =>{\r\n            let data = response.data;\r\n    \r\n            for(let i = 0 ; i < data.length; i++){\r\n                teams_name.push(data[i].name);\r\n            }\r\n           \r\n            \r\n      \r\n        })\r\n        axios.get(\"http://127.0.0.1:8000/api/users/\"+pseudo)\r\n        .then(res => {\r\n            let data = res.data;\r\n            user_id = data.id;\r\n        })\r\n\r\n\r\n    }\r\n\r\n    joinTeam(){\r\n        let pseudonym = pseudo;\r\n        axios.get(api_user+pseudonym)\r\n        .then(res => {\r\n            let get_id = res.data;\r\n            let user_id = get_id.id;\r\n            let data = new FormData();\r\n            data.append(\"user\", user_id);\r\n            data.append(\"team\", this.value);\r\n            data.append(\"csrfmiddlewaretoken\", csrf_token);\r\n            axios.post(\"http://127.0.0.1:8000/api/add_player/\", data)\r\n            .then(response => {\r\n                if(response.data){\r\n                    console.log(\"Equipe rejointe\");\r\n                }})\r\n            .catch(errors => console.log(errors))\r\n        })\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const teams = teams_name;\r\n\r\n        const items = [];\r\n        \r\n\r\n\r\n        for(const [index, value] of teams.entries()){\r\n            items.push(<li key={index} id=\"listeElement\">{value}<button id=\"buttonJoin\" onClick={this.joinTeam(this)}>Rejoindre</button></li>);\r\n        }\r\n\r\n\r\n\r\n        return (\r\n            <>\r\n                <div className='team'>\r\n                    <div className='contentTeams'>\r\n                        Les Ã©quipes\r\n                    <ul id=\"listEquipes\">\r\n                        {items}\r\n\r\n                    </ul>\r\n                    </div>\r\n                </div>\r\n                <Footer/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}