{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Christopher\\\\Desktop\\\\Projets\\\\Azakana\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import axios from'axios';import React,{Component}from'react';import Cookies from'js-cookie';import'./Member.css';var csrf_token=\"\";var user_id=0;var BASE_URL='http://127.0.0.1:8000/api/';//51.210.4.115:8000\nvar api_user=BASE_URL+'users/';var api_members=BASE_URL+'members/';var Member=/*#__PURE__*/function(_Component){_inherits(Member,_Component);var _super=_createSuper(Member);function Member(){var _this;_classCallCheck(this,Member);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={pseudo:Cookies.get('Pseudo'),token:Cookies.get('Token'),team:\"\"};return _this;}_createClass(Member,[{key:\"componentDidMount\",value:function componentDidMount(){axios.get(api_user+this.state.pseudo).then(function(res){var data=res.data;user_id=data.id;});axios.get(\"http://127.0.0.1:8000/api/csrf_token/\").then(function(res){csrf_token=res.data;});}},{key:\"addPlayer\",value:function addPlayer(){var pseudo=document.getElementById(\"input\").value;axios.get(api_user+pseudo).then(function(res){var data=res.data;user_id=data.id;});var data=new FormData();data.append(\"user_id\",user_id);data.append(\"team_name\",document.getElementById('span').innerText);data.append(\"csrfmiddlewaretoken\",csrf_token);axios.post(\"http://127.0.0.1:8000/api/add_player/\",data).then(function(response){if(response.data){console.log(\"Joueur ajouté\");}}).catch(function(errors){return console.log(errors);});}},{key:\"removePlayer\",value:function removePlayer(){var data=new FormData();data.append(\"user_id\",user_id);data.append(\"team_name\",this.props.team);data.append(\"csrfmiddlewaretoken\",csrf_token);axios.put(api_members,data).then(function(response){if(response.data){console.log(\"Joueur retiré\");}}).catch(function(errors){return console.log(errors);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"team\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{id:\"teamname\"},\"Equipe \",/*#__PURE__*/React.createElement(\"span\",{id:\"span\"},this.props.team)),/*#__PURE__*/React.createElement(\"div\",{id:\"teamChangerContent\"},/*#__PURE__*/React.createElement(\"input\",{id:\"input\",type:\"text\",name:\"player\",placeholder:\"Nom du joueur\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{id:\"addPlayer\",onClick:this.addPlayer},\"Ajouter joueur\"),/*#__PURE__*/React.createElement(\"button\",{id:\"removePlayer\",onClick:this.removePlayer},\"Retirer joueur\"),/*#__PURE__*/React.createElement(\"div\",{id:\"message\"}))));}}]);return Member;}(Component);export{Member as default};","map":{"version":3,"sources":["C:/Users/Christopher/Desktop/Projets/Azakana/frontend/src/components/Team/Member.js"],"names":["axios","React","Component","Cookies","csrf_token","user_id","BASE_URL","api_user","api_members","Member","state","pseudo","get","token","team","then","res","data","id","document","getElementById","value","FormData","append","innerText","post","response","console","log","catch","errors","props","put","addPlayer","removePlayer"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { Component } from 'react';\r\nimport Cookies from 'js-cookie';\r\nimport './Member.css';\r\n\r\nlet csrf_token = \"\";\r\nlet user_id = 0;\r\nconst BASE_URL = 'http://127.0.0.1:8000/api/';//51.210.4.115:8000\r\nconst api_user = BASE_URL+'users/';\r\nconst api_members = BASE_URL+'members/';\r\n\r\nexport default class Member extends Component {\r\n\r\n    state = {\r\n        pseudo: Cookies.get('Pseudo'),\r\n        token: Cookies.get('Token'),\r\n        team: \"\",\r\n      }\r\n\r\n    componentDidMount() {\r\n        axios.get(api_user+this.state.pseudo)\r\n        .then(res => {\r\n            let data = res.data;\r\n            user_id = data.id;\r\n        })\r\n        axios.get(\"http://127.0.0.1:8000/api/csrf_token/\")\r\n        .then(res =>{\r\n            csrf_token = res.data;\r\n        })\r\n\r\n    }\r\n\r\n    addPlayer() {\r\n        let pseudo = document.getElementById(\"input\").value;\r\n        axios.get(api_user+pseudo)\r\n        .then(res => {\r\n            let data = res.data;\r\n            user_id = data.id;\r\n        })\r\n        let data = new FormData();\r\n        data.append(\"user_id\", user_id);\r\n        data.append(\"team_name\", document.getElementById('span').innerText);\r\n        data.append(\"csrfmiddlewaretoken\", csrf_token);\r\n        axios.post(\"http://127.0.0.1:8000/api/add_player/\", data)\r\n        .then(response => {\r\n            if(response.data){\r\n                console.log(\"Joueur ajouté\");\r\n            }\r\n        })\r\n        .catch(errors => console.log(errors))\r\n\r\n    }\r\n\r\n    removePlayer(){\r\n        let data = new FormData();\r\n        data.append(\"user_id\", user_id);\r\n        data.append(\"team_name\", this.props.team);\r\n        data.append(\"csrfmiddlewaretoken\", csrf_token);\r\n        axios.put(api_members, data)\r\n        .then(response => {\r\n            if(response.data){\r\n                console.log(\"Joueur retiré\");\r\n            }\r\n        })\r\n        .catch(errors => console.log(errors))\r\n\r\n    }\r\n\r\n\r\n   \r\n\r\n    render() {\r\n        return (\r\n            <div className='team'>\r\n                <div className='content'>\r\n                <div id=\"teamname\">\r\n                    Equipe <span id=\"span\">{this.props.team}</span>\r\n                </div>\r\n                \r\n                <div id=\"teamChangerContent\">\r\n                    <input id=\"input\" type=\"text\" name=\"player\"  placeholder=\"Nom du joueur\"></input>\r\n                    <br></br>\r\n                    <button id=\"addPlayer\"  onClick={this.addPlayer}>Ajouter joueur</button>\r\n                    <button id=\"removePlayer\" onClick={this.removePlayer}>Retirer joueur</button>\r\n                <div id=\"message\">\r\n                    \r\n                </div>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}